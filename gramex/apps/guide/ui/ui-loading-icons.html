<h2>Loading icons</h2>
<div class="page-alert"></div>
<table class="table table-striped table-inverse table-hover" data-item="Loading icons">
  <thead>
    <tr>
      <th>Default</th>
      <th>Ajax request (success) - Click</th>
      <th>Ajax request (failure) - Click</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td data-url="default">Click for action</td>
      <td class="ajax-request-success" data-url="data">
        Successful request
      </td>
      <td class="ajax-request-failure" data-url="gramener">
        Bad request
      </td>
    </tr>
  </tbody>
</table>
<script>
  function alertMessage(context, message, message_for, container) {
    var $msg = $('<div class="alert alert-' + context + ' alert-dismissable" role="alert">' +
      '<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>' +
      '<p class="message"> ' + message + ': <span class="text-danger"> ' + message_for +
      ' </span></div>').appendTo(container)
    setTimeout(function () { $msg.slideUp(500, function () { $msg.alert('close') }) }, 3000)
  }

  function sendRequest(url, container) {
    $.ajax(url, {
      method: 'GET',
      data: {'data': 'test data'},
      beforeSend: function() { $('.' + container).html('<i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>') },
      success: function(response) { alertMessage('success', 'Successfully processed request', 'AJAX', '.page-alert') },
      complete: function() { $('.' + container).html('Completed AJAX request') },
      error: function() { alertMessage('danger', 'Error processing request', 'AJAX', '.page-alert') }
    })
  }

  $('body').on('click', 'td', function() {
    if($(this).data('url') !== 'default')
      sendRequest($(this).data('url'), $(this).attr('class'))
    else
      $(this).html('<i class="fa fa-spinner fa-pulse fa-3x fa-fw">')
  })
</script>
