url:
  # Redirect / to /blog/
  home:
    pattern: /
    handler: gramex.handlers.FunctionHandler
    kwargs:
      function: json.dumps
      args: []
      kwargs:
        obj:
          x: 1
          y: 2
        separators: [",", ":"]
      headers:
        Content-Type: application/json
      # redirect: /blog/

  # /hello displays Hello world
  hello:
    pattern: /hello
    handler: gramex.handlers.FunctionHandler
    kwargs:
      function: six.text_type               # Display as text in Python 2 & 3
      args:
        - Hello world                       # with "Hello world"

  # Compute the total of a set of numbers and render as JSON
  total:
    pattern: /total
    handler: gramex.handlers.FunctionHandler
    kwargs:
      function: calculations.total
      args: [100, 200.0, 500.00]
      headers:
        Content-Type: application/json

  # Render YAML/MD files in current directory as HTML
  blog-app:                           # named blog-app.
    pattern: /blog/(.*)               # The /blog/ URL uses TransformHandler
    handler: gramex.handlers.TransformHandler
    kwargs:                           # with these arguments:
      path: .                         # Serve files from this folder
      default_filename: index.yaml    # Directory index file
      transform:
        "*.yaml":                     # Convert .yaml to HTML via BadgerFish
          function: gramex.transforms.badgerfish
          kwargs:
            mapping:                      # badgerfish() allows tag transforms
              vega-chart:                 # All <vega-chart> tag contents
                function: json.dumps      # are rendered as JSON
          headers:
            "Content-Type": text/html
        "*.md":                           # Convert .md to HTML via Markdown
          function: markdown.markdown     # Run markdown.markdown(file)
          headers:
            "Content-Type": text/html     # Response is served as text/html
